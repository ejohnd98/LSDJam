[gd_scene load_steps=15 format=3 uid="uid://oemojq2461ft"]

[ext_resource type="PackedScene" uid="uid://1sa17jfn3xdt" path="res://sourceModels/ChasingEnemy.glb" id="1_t88vv"]
[ext_resource type="Script" path="res://scenes/chasing_enemy.gd" id="2_mxnwr"]
[ext_resource type="AudioStream" uid="uid://cw6bqsd0j1cbk" path="res://sounds/various_ambiences/mindbreak.ogg" id="3_d5edb"]
[ext_resource type="Script" path="res://scenes/entities/AudioFader.gd" id="4_m1mu6"]
[ext_resource type="AudioStream" uid="uid://do8xeish6dgyv" path="res://sounds/scream.ogg" id="4_nq418"]
[ext_resource type="Shader" path="res://shaders/bubbleDistortion.gdshader" id="5_2tkd5"]

[sub_resource type="Curve" id="Curve_lbush"]
_data = [Vector2(0, 0.0272492), 0.0, 0.0, 0, 0, Vector2(0.759191, 0.308391), 1.43945, 1.43945, 0, 0, Vector2(0.943015, 1), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 4

[sub_resource type="FastNoiseLite" id="FastNoiseLite_slpjc"]
noise_type = 3
frequency = 0.0072
fractal_type = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_3dcqk"]
seamless = true
noise = SubResource("FastNoiseLite_slpjc")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_01e4o"]
resource_local_to_scene = true
render_priority = 0
shader = ExtResource("5_2tkd5")
shader_parameter/distortionView = 0.125
shader_parameter/speedView = 0.113
shader_parameter/static_intensity = 0.95
shader_parameter/tintColor = Color(1, 0.235294, 0.180392, 1)
shader_parameter/fesnelAmount = 0.05
shader_parameter/fresnelTintOffset = -1.0
shader_parameter/distortionVertex = 0.0
shader_parameter/speedVertex = 0.1
shader_parameter/noiseViewX = SubResource("NoiseTexture2D_3dcqk")
shader_parameter/noiseViewY = SubResource("NoiseTexture2D_3dcqk")
shader_parameter/noiseVertex = SubResource("NoiseTexture2D_3dcqk")

[sub_resource type="SphereShape3D" id="SphereShape3D_2ohqb"]
radius = 15.0

[sub_resource type="Animation" id="Animation_fmxup"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Armature/Skeleton3D/Cube:surface_material_override/0:shader_parameter/fesnelAmount")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.05]
}

[sub_resource type="Animation" id="Animation_ynid6"]
resource_name = "start_chase"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Armature/Skeleton3D/Cube:surface_material_override/0:shader_parameter/fesnelAmount")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.05, 0.85]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ve77b"]
_data = {
"RESET": SubResource("Animation_fmxup"),
"start_chase": SubResource("Animation_ynid6")
}

[node name="ChasingEnemy" instance=ExtResource("1_t88vv")]
script = ExtResource("2_mxnwr")
progress_curve = SubResource("Curve_lbush")

[node name="Skeleton3D" parent="Armature" index="0"]
bones/0/position = Vector3(5.53514, 5.69004, -313.905)
bones/0/rotation = Quaternion(-0.712409, 0.217819, -0.150466, 0.649914)
bones/1/rotation = Quaternion(-0.000512723, 0.0186433, -0.0141079, 0.999727)
bones/2/rotation = Quaternion(0.0474138, 0.0406797, -0.0252586, 0.997727)
bones/3/position = Vector3(-3.57628e-07, 49.4719, 7.15256e-07)
bones/3/rotation = Quaternion(0.0473618, 0.0406375, -0.0254237, 0.997727)
bones/4/position = Vector3(7.15256e-06, 55.6557, -8.19345e-06)
bones/4/rotation = Quaternion(0.0510215, -0.0368348, -0.0355707, 0.997384)
bones/5/position = Vector3(-8.34465e-06, 28.7281, 1.21734)
bones/5/rotation = Quaternion(0.00300463, -0.257441, 0.0973987, 0.961368)
bones/6/position = Vector3(1.19209e-06, 73.0855, 3.09695)
bones/7/position = Vector3(26.0915, 48.0007, -0.468937)
bones/7/rotation = Quaternion(-0.600718, -0.359928, 0.635795, -0.324584)
bones/7/scale = Vector3(1, 1, 1)
bones/8/position = Vector3(1.17126e-05, 52.8348, 2.64183e-05)
bones/8/rotation = Quaternion(0.427654, -0.0724424, 0.102863, 0.895144)
bones/8/scale = Vector3(1, 1, 1)
bones/9/position = Vector3(-1.07022e-06, 81.6416, 9.06382e-06)
bones/9/rotation = Quaternion(0.0101728, 0.0529469, 0.215185, 0.975084)
bones/10/position = Vector3(2.20673e-05, 83.5223, -1.04498e-06)
bones/10/rotation = Quaternion(0.118969, -0.0786944, -0.0100127, 0.989724)
bones/10/scale = Vector3(1, 1, 1)
bones/11/position = Vector3(7.51258e-06, 23.8603, -1.97092e-05)
bones/11/rotation = Quaternion(0.116649, 0.0102999, -0.0184074, 0.992949)
bones/12/position = Vector3(1.69426e-05, 10.8248, -3.5509e-06)
bones/12/rotation = Quaternion(-0.0448537, 0.0117603, -0.0933537, 0.994553)
bones/13/rotation = Quaternion(0.204189, 0.00603803, 0.0499068, 0.97764)
bones/14/position = Vector3(-0.190862, 10.2392, 1.50633)
bones/15/position = Vector3(-26.0915, 47.9913, -0.276123)
bones/15/rotation = Quaternion(0.548304, -0.422392, 0.61337, 0.380426)
bones/16/position = Vector3(-3.71915e-06, 52.8348, -6.8317e-06)
bones/16/rotation = Quaternion(0.489049, -0.0823053, 0.0560246, 0.866555)
bones/17/position = Vector3(1.71542e-05, 81.6509, 2.39519e-05)
bones/17/rotation = Quaternion(0.0113919, -0.0642054, -0.261289, 0.963056)
bones/18/position = Vector3(-3.63358e-06, 83.517, -9.83518e-06)
bones/18/rotation = Quaternion(0.250527, 0.00695922, 0.049922, 0.966797)
bones/18/scale = Vector3(1, 1, 1)
bones/19/position = Vector3(1.23719e-05, 24.3528, -1.2965e-06)
bones/19/rotation = Quaternion(0.104048, 0.00173023, 0.0175575, 0.994416)
bones/20/position = Vector3(-3.27825e-06, 10.8887, 7.06546e-06)
bones/20/rotation = Quaternion(0.134516, -0.0097151, 0.115819, 0.984072)
bones/21/position = Vector3(3.06243, 15.2589, -0.968778)
bones/21/rotation = Quaternion(-0.00494073, 0.00348456, -0.0606691, 0.99814)
bones/22/position = Vector3(0.390362, 10.0608, 1.58918)
bones/23/rotation = Quaternion(0.00618068, 0.0418045, 0.999017, -0.0133679)
bones/23/scale = Vector3(1, 1, 1)
bones/24/position = Vector3(-9.28255e-06, 161.372, -3.51999e-06)
bones/24/rotation = Quaternion(-0.347877, 0.0873514, 0.024042, 0.933152)
bones/24/scale = Vector3(1, 1, 1)
bones/25/rotation = Quaternion(0.73125, 0.154968, -0.0975136, 0.657076)
bones/25/scale = Vector3(1, 1, 1)
bones/26/rotation = Quaternion(0.22289, 0.000661634, -0.000151341, 0.974843)
bones/28/rotation = Quaternion(-0.150903, 0.182969, 0.954027, 0.183259)
bones/28/scale = Vector3(1, 1, 1)
bones/29/rotation = Quaternion(-0.307672, -0.0641128, 0.00757834, 0.9493)
bones/29/scale = Vector3(1, 1, 1)
bones/30/position = Vector3(-3.77133e-06, 140.333, 1.36766e-05)
bones/30/rotation = Quaternion(0.588425, 0.0322671, 0.0907921, 0.80279)
bones/30/scale = Vector3(1, 1, 1)
bones/31/rotation = Quaternion(0.220177, -0.00156053, 0.000352272, 0.975459)
bones/32/position = Vector3(9.4492e-06, 17.5449, 4.65664e-08)

[node name="Cube" parent="Armature/Skeleton3D" index="0"]
surface_material_override/0 = SubResource("ShaderMaterial_01e4o")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="." index="2"]
stream = ExtResource("3_d5edb")
script = ExtResource("4_m1mu6")
fade_out_time = 4.0
overall_volume = 0.35

[node name="AudioStreamPlayer3D" type="AudioStreamPlayer3D" parent="." index="3"]
stream = ExtResource("4_nq418")
volume_db = -5.0

[node name="Area3D" type="Area3D" parent="." index="4"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D" index="0"]
shape = SubResource("SphereShape3D_2ohqb")

[node name="OffscreenTimer" type="Timer" parent="." index="5"]
wait_time = 0.5
one_shot = true

[node name="StartAnim" type="AnimationPlayer" parent="." index="6"]
libraries = {
"": SubResource("AnimationLibrary_ve77b")
}

[node name="StartingTimer" type="Timer" parent="." index="7"]
wait_time = 3.0
one_shot = true
autostart = true

[connection signal="body_entered" from="Area3D" to="." method="_on_area_3d_body_entered"]
[connection signal="body_exited" from="Area3D" to="." method="_on_area_3d_body_exited"]
